FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IHVuaWZpZWRwdXNoLWFwYgpkZXNjcmlwdGlvbjogQWVyb0dlYXIg\
VW5pZmllZFB1c2ggU2VydmVyCmJpbmRhYmxlOiBUcnVlCmFzeW5jOiBvcHRpb25hbAp0YWdzOiAK\
ICAtIG1vYmlsZS1zZXJ2aWNlCiAgLSBtb2JpbGUtY2xpZW50LWVuYWJsZWQKbWV0YWRhdGE6CiAg\
ZGlzcGxheU5hbWU6IFVuaWZpZWQgUHVzaCBTZXJ2ZXIgdGVzdAogIGxvbmdEZXNjcmlwdGlvbjog\
IkFuIEFQQiBkZXBsb3lpbmcgdGhlIEFlcm9HZWFyIFVuaWZpZWRQdXNoIFNlcnZlciB3aXRoIHBl\
cnNpc3RlbnQgc3RvcmFnZSBhbmQgYXV0aGVudGljYXRpb24gdGhyb3VnaCBPcGVuc2hpZnQiCiAg\
aW1hZ2VVcmw6ICJodHRwczovL3Bicy50d2ltZy5jb20vcHJvZmlsZV9pbWFnZXMvMTc5NDQ0MDAw\
NS9hZXJvZ2Vhcl9pY29uLTFfNDAweDQwMC5wbmciCiAgZG9jdW1lbnRhdGlvblVybDogImh0dHBz\
Oi8vZ2l0aHViLmNvbS9hZXJvZ2VhcmNhdGFsb2cvdW5pZmllZHB1c2gtYXBiL2Jsb2IvbWFzdGVy\
L2RvY3MvbW9kdWxlcy91cHNfb3BlbnNoaWZ0L2luZGV4LmFzY2lpZG9jIgogIHByb3ZpZGVyRGlz\
cGxheU5hbWU6ICJSZWQgSGF0LCBJbmMuIgogIGRlcGVuZGVuY2llczoKICAgIC0gImRvY2tlci5p\
by9hZXJvZ2Vhci91bmlmaWVkcHVzaC13aWxkZmx5LXBsYWluOjIuMC4yIgogICAgLSAiZG9ja2Vy\
LmlvL2NlbnRvcy9wb3N0Z3Jlc3FsLTk2LWNlbnRvczc6OS42IgogICAgLSAiZG9ja2VyLmlvL2Fl\
cm9nZWFyL3Vwcy1jb25maWctb3BlcmF0b3I6bWFzdGVyIgogICAgLSAiZG9ja2VyLmlvL29wZW5z\
aGlmdC9vYXV0aC1wcm94eTp2MS4xLjAiCiAgc2VydmljZU5hbWU6IHVwcwpwbGFuczoKICAtIG5h\
bWU6IGRlZmF1bHQKICAgIGRlc2NyaXB0aW9uOiBQZXJzaXN0ZW50IGRlcGxveW1lbnQgb2YgVVBT\
CiAgICBmcmVlOiBUcnVlCiAgICBtZXRhZGF0YToge30KICAgIHBhcmFtZXRlcnM6IFtdCiAgICBi\
aW5kX3BhcmFtZXRlcnM6CiAgICAtIG5hbWU6IENMSUVOVF9JRAogICAgICByZXF1aXJlZDogVHJ1\
ZQogICAgICB0aXRsZTogVGhlIElEIG9mIHRoZSBtb2JpbGUgY2xpZW50IHRvIGJpbmQgdGhpcyB2\
YXJpYW50IHRvCiAgICAgIHR5cGU6IHN0cmluZwogICAgLSBuYW1lOiB0eXBlCiAgICAgIHJlcXVp\
cmVkOiBUcnVlCiAgICAgIHRpdGxlOiBBcHAgdGFyZ2V0CiAgICAgIHR5cGU6IGVudW0KICAgICAg\
ZGVmYXVsdDogIkFuZHJvaWQiCiAgICAgIGVudW06IFsiQW5kcm9pZCIsICJJT1MiXQogICAgLSBu\
YW1lOiBnb29nbGVrZXkKICAgICAgdGl0bGU6IFlvdXIgR29vZ2xlIEtleSBmb3IgRmlyZWJhc2Ug\
Q2xvdWQgTWVzc2FnaW5nCiAgICAgIHR5cGU6IHN0cmluZwogICAgICBkaXNwbGF5X2dyb3VwOiBB\
bmRyb2lkCiAgICAtIG5hbWU6IHByb2plY3ROdW1iZXIKICAgICAgdGl0bGU6IFlvdXIgRkNNIFBy\
b2plY3QgTnVtYmVyLCBuZWVkZWQgb24gdGhlIG1vYmlsZSBjbGllbnQgZm9yIGNvbm5lY3Rpbmcg\
d2l0aCBGQ00KICAgICAgdHlwZTogc3RyaW5nCiAgICAgIGRpc3BsYXlfZ3JvdXA6IEFuZHJvaWQK\
ICAgIC0gbmFtZTogY2VydAogICAgICB0aXRsZTogaU9TIC5wMTIgZmlsZSAoZW5jb2RlIGNvbnRl\
bnRzIGluIGJhc2U2NCBiZWZvcmUgcGFzdGluZykKICAgICAgdHlwZTogc3RyaW5nCiAgICAgIGRp\
c3BsYXlfdHlwZTogdGV4dGFyZWEKICAgICAgZGlzcGxheV9ncm91cDogaU9TCiAgICAtIG5hbWU6\
IHBhc3NwaHJhc2UKICAgICAgdGl0bGU6IHRoZSBwYXNzcGhyYXNlCiAgICAgIHR5cGU6IHN0cmlu\
ZwogICAgICBkaXNwbGF5X3R5cGU6IHBhc3N3b3JkCiAgICAgIGRpc3BsYXlfZ3JvdXA6IGlPUwo="



COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
COPY vars /opt/ansible/vars
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
