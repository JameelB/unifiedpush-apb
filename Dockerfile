FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IHVuaWZpZWRwdXNoLWFwYgpkZXNjcmlwdGlvbjogQWVyb0dlYXIg\
VW5pZmllZFB1c2ggU2VydmVyCmJpbmRhYmxlOiBUcnVlCmFzeW5jOiBvcHRpb25hbAp0YWdzOiAK\
ICAtIG1vYmlsZS1zZXJ2aWNlCm1ldGFkYXRhOgogIGRpc3BsYXlOYW1lOiBVbmlmaWVkUHVzaCBT\
ZXJ2ZXIKICBjb25zb2xlLm9wZW5zaGlmdC5pby9pY29uQ2xhc3M6IGZhIGZhLXJvY2tldAogIHNl\
cnZpY2VOYW1lOiB1cHMKcGxhbnM6CiAgLSBuYW1lOiBkZWZhdWx0CiAgICBkZXNjcmlwdGlvbjog\
RGVwbG95IFVQUwogICAgZnJlZTogVHJ1ZQogICAgbWV0YWRhdGE6IHt9CiAgICBwYXJhbWV0ZXJz\
OiAKICAgIC0gbmFtZTogTVlTUUxfVVNFUgogICAgICByZXF1aXJlZDogVHJ1ZQogICAgICBkZWZh\
dWx0OiB1bmlmaWVkcHVzaAogICAgICB0eXBlOiBzdHJpbmcKICAgICAgdGl0bGU6IFVTUCBkYiB1\
c2VybmFtZQogICAgLSBuYW1lOiBNWVNRTF9QQVNTV09SRAogICAgICByZXF1aXJlZDogVHJ1ZQog\
ICAgICBkZWZhdWx0OiB1bmlmaWVkcHVzaAogICAgICB0eXBlOiBzdHJpbmcKICAgICAgdGl0bGU6\
IFVTUCBkYiBwYXNzd29yZAogICAgLSBuYW1lOiBNWVNRTF9EQVRBQkFTRQogICAgICByZXF1aXJl\
ZDogVHJ1ZQogICAgICBkZWZhdWx0OiB1bmlmaWVkcHVzaAogICAgICB0eXBlOiBzdHJpbmcKICAg\
ICAgdGl0bGU6IFVTUCBkYXRhYmFzZSBuYW1lCiAgICBiaW5kX3BhcmFtZXRlcnM6CiAgICAtIG5h\
bWU6IHNlcnZpY2UKICAgICAgdGl0bGU6IFRoZSBzZXJ2aWNlIHRoZSBjbGllbnQgaXMgZm9yCiAg\
ICAgIHR5cGU6IHN0cmluZwo="

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
