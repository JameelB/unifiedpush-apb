FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IHVuaWZpZWRwdXNoLWFwYgpkZXNjcmlwdGlvbjogQWVyb0dlYXIg\
VW5pZmllZFB1c2ggU2VydmVyCmJpbmRhYmxlOiBUcnVlCmFzeW5jOiBvcHRpb25hbAp0YWdzOiAK\
ICAtIG1vYmlsZS1zZXJ2aWNlCm1ldGFkYXRhOgogIGRpc3BsYXlOYW1lOiBBZXJvR2VhciBVUFMK\
ICBpbWFnZVVybDogImh0dHBzOi8vcGJzLnR3aW1nLmNvbS9wcm9maWxlX2ltYWdlcy8xNzk0NDQw\
MDA1L2Flcm9nZWFyX2ljb24tMV80MDB4NDAwLnBuZyIKICBkb2N1bWVudGF0aW9uVXJsOiAiaHR0\
cHM6Ly9hZXJvZ2Vhci5vcmcvcHVzaCIKICBwcm92aWRlckRpc3BsYXlOYW1lOiAiUmVkIEhhdCwg\
SW5jLiIKICBkZXBlbmRlbmNpZXM6IFsnTXlTUUw6NTUnXQogIHNlcnZpY2VOYW1lOiB1cHMKcGxh\
bnM6CiAgLSBuYW1lOiBkZWZhdWx0CiAgICBkZXNjcmlwdGlvbjogRGVwbG95IFVQUwogICAgZnJl\
ZTogVHJ1ZQogICAgbWV0YWRhdGE6IHt9CiAgICBwYXJhbWV0ZXJzOiAKICAgIC0gbmFtZTogTVlT\
UUxfVVNFUgogICAgICByZXF1aXJlZDogVHJ1ZQogICAgICBkZWZhdWx0OiB1bmlmaWVkcHVzaAog\
ICAgICB0eXBlOiBzdHJpbmcKICAgICAgdGl0bGU6IFVQUyBkYiB1c2VybmFtZQogICAgLSBuYW1l\
OiBfTVlTUUxfUEFTU1dPUkQKICAgICAgZGVzY3JpcHRpb246IChnZW5lcmF0ZWQgaWYgbGVmdCBi\
bGFuaykKICAgICAgcmVxdWlyZWQ6IEZhbHNlCiAgICAgIHR5cGU6IHN0cmluZwogICAgICB0aXRs\
ZTogVVBTIGRiIHBhc3N3b3JkCiAgICAtIG5hbWU6IF9NWVNRTF9ST09UX1BBU1NXT1JECiAgICAg\
IGRlc2NyaXB0aW9uOiAoZ2VuZXJhdGVkIGlmIGxlZnQgYmxhbmspCiAgICAgIHJlcXVpcmVkOiBG\
YWxzZQogICAgICB0eXBlOiBzdHJpbmcKICAgICAgdGl0bGU6IFVQUyBkYiByb290IHBhc3N3b3Jk\
CiAgICAtIG5hbWU6IE1ZU1FMX0RBVEFCQVNFCiAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgIGRl\
ZmF1bHQ6IHVuaWZpZWRwdXNoCiAgICAgIHR5cGU6IHN0cmluZwogICAgICB0aXRsZTogVVBTIGRh\
dGFiYXNlIG5hbWUKICAgIC0gbmFtZTogTVlTUUxfVkVSU0lPTgogICAgICByZXF1aXJlZDogVHJ1\
ZQogICAgICBkZWZhdWx0OiAiNTUiCiAgICAgIGVudW06IFsnNTUnLCAnNTYnXQogICAgICB0eXBl\
OiBlbnVtCiAgICAgIHRpdGxlOiBNeVNRTCB2ZXJzaW9uCiAgICBiaW5kX3BhcmFtZXRlcnM6CiAg\
ICAtIG5hbWU6IHZhcmlhbnROYW1lCiAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgIHRpdGxlOiBU\
aGUgbmFtZSBvZiB0aGUgdmFyaWFudCB0byBiaW5kIHRoZSBtb2JpbGUgY2xpZW50IHJlcHJlc2Vu\
dGF0aW9uIHRvCiAgICAgIHR5cGU6IHN0cmluZwogICAgLSBuYW1lOiB0eXBlCiAgICAgIHJlcXVp\
cmVkOiBUcnVlCiAgICAgIHRpdGxlOiBBcHAgdGFyZ2V0CiAgICAgIHR5cGU6IGVudW0KICAgICAg\
ZGVmYXVsdDogIkFuZHJvaWQiCiAgICAgIGVudW06IFsiQW5kcm9pZCJdCiAgICAtIG5hbWU6IGdv\
b2dsZWtleQogICAgICByZXF1aXJlZDogVHJ1ZQogICAgICB0aXRsZTogWW91ciBHb29nbGUgS2V5\
IGZvciBGaXJlYmFzZSBDbG91ZCBNZXNzYWdpbmcKICAgICAgdHlwZTogc3RyaW5nCiAgICAtIG5h\
bWU6IHByb2plY3ROdW1iZXIKICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgdGl0bGU6IFlvdXIg\
RkNNIFByb2plY3QgTnVtYmVyLCBuZWVkZWQgb24gdGhlIG1vYmlsZSBjbGllbnQgZm9yIGNvbm5l\
Y3Rpbmcgd2l0aCBGQ00KICAgICAgdHlwZTogc3RyaW5nCg=="

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
COPY vars /opt/ansible/vars
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
